# ============================================================================
# LLM-Shield Service Environment Configuration (HARDENED)
# ============================================================================
# Phase 1 / Layer 1 - Foundational Tooling
#
# Copy to .env and configure for your environment.
# For Cloud Run, these are set via --set-env-vars and --set-secrets in cloudbuild.yaml
#
# CRITICAL: Service will crash on startup if required variables are missing
# ============================================================================

# ==========================
# MANDATORY: AGENT IDENTITY
# ==========================
# These MUST be set for Phase 1 / Layer 1 compliance
# Service will NOT start without these

# Agent name (used in DecisionEvents and logging)
AGENT_NAME=llm-shield

# Agent domain (e.g., security, detection, enforcement)
AGENT_DOMAIN=security

# Deployment phase (MUST be "phase1" for Phase 1)
AGENT_PHASE=phase1

# Deployment layer (MUST be "layer1" for Layer 1)
AGENT_LAYER=layer1

# ==========================
# MANDATORY: RUVECTOR INTEGRATION
# ==========================
# CRITICAL: Ruvector is REQUIRED - service crashes if unavailable
# These secrets should be in Google Secret Manager for Cloud Run

# REQUIRED: Base URL of ruvector-service for decision event persistence
# LLM-Shield does NOT connect directly to databases - all persistence via ruvector-service
RUVECTOR_SERVICE_URL=https://ruvector-service-dev.agentics.dev

# REQUIRED: API key for ruvector-service authentication
# Stored in Google Secret Manager as "ruvector-api-key"
RUVECTOR_API_KEY=your-api-key-here

# ==========================
# SERVICE CONFIGURATION
# ==========================
# Service name (used in telemetry and logging)
SERVICE_NAME=llm-shield

# Service version (semantic versioning)
SERVICE_VERSION=1.0.0

# Platform environment
# Options: dev | staging | prod
PLATFORM_ENV=dev

# Server configuration
PORT=8080
HOST=0.0.0.0

# ==========================
# TELEMETRY CONFIGURATION
# ==========================
# LLM-Observatory telemetry endpoint (optional)
TELEMETRY_ENDPOINT=https://observatory-dev.agentics.dev/telemetry

# Enable/disable telemetry (default: true)
TELEMETRY_ENABLED=true

# ==========================
# LOGGING CONFIGURATION
# ==========================
# Minimal logging is enforced for Phase 1
# Only: agent_started, decision_event_emitted, agent_abort
# Log level: debug | info | warn | error
LOG_LEVEL=info

# Log format: json | text (json recommended for Cloud Run)
LOG_FORMAT=json

# ==========================
# PERFORMANCE BOUNDARIES
# ==========================
# Conservative defaults for Phase 1 / Layer 1
# These are enforced by the startup validator

# Maximum tokens per request (default: 800)
# MAX_TOKENS=800

# Maximum latency in milliseconds (default: 1500)
# MAX_LATENCY_MS=1500

# Maximum external API calls per detection run (default: 2)
# MAX_CALLS_PER_RUN=2

# ==========================
# AGENT CONFIGURATION
# ==========================
# Default detection sensitivity (0.0 - 1.0)
DEFAULT_SENSITIVITY=0.5

# Default detection threshold (0.0 - 1.0)
DEFAULT_THRESHOLD=0.7

# Enable pattern caching (read-only cache, TTL 30-60s)
PATTERN_CACHE_ENABLED=true

# ==========================
# RATE LIMITING (optional)
# ==========================
# Rate limit requests per minute per client
RATE_LIMIT_RPM=1000

# Rate limit burst size
RATE_LIMIT_BURST=100

# ==========================
# CORS CONFIGURATION (optional)
# ==========================
# Allowed origins (comma-separated, or * for all)
CORS_ORIGINS=*

# Allowed methods
CORS_METHODS=GET,POST,OPTIONS
